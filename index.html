<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vault of Time</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    /* CLOCK ANIMATION */
    .clock-icon {
      display:inline-block;
      transform-origin:bottom center;
      animation:tick 1.2s infinite steps(2,start), clock-glow 3s ease-in-out 1;
      text-shadow:0 0 0 rgba(212,175,55,0);
      opacity:.85;
    }
    .clock-icon.reverse {
      animation:tick-reverse 1.2s infinite steps(2,start), clock-glow 3s ease-in-out 1;
    }
    @keyframes tick{0%{transform:rotate(0)}50%{transform:rotate(6deg)}100%{transform:rotate(0)}}
    @keyframes tick-reverse{0%{transform:rotate(0)}50%{transform:rotate(-6deg)}100%{transform:rotate(0)}}
    @keyframes clock-glow{
      0%{text-shadow:0 0 0 rgba(212,175,55,0);opacity:.4;transform:scale(1)}
      50%{text-shadow:0 0 20px rgba(212,175,55,.9),0 0 40px rgba(212,175,55,.6);opacity:1;transform:scale(1.1)}
      100%{text-shadow:0 0 6px rgba(212,175,55,.8);opacity:.85;transform:scale(1)}
    }

    /* PAYPAL UI bits */
    #paypal-button-container { display:none; opacity:0; transition:opacity .4s ease; margin-top:12px; }
    #paypal-button-container.show { display:block; opacity:1; }
    #ready-message { display:none; opacity:0; color:#9be589; font-weight:600; font-size:14px; margin-top:8px; transition:opacity .4s ease, transform .3s ease; transform:translateY(4px); }
    #ready-message.show { display:block; opacity:1; transform:translateY(0); }
  </style>
</head> 
  
<script src="https://www.paypal.com/sdk/js?client-id=AUK2McH5yTvRCHXypQrwShFriZMsW7Ojf16wtlHAYP8rsK92eio4l65xyVDfC0sZl2WGQWTlFrbZZnP7&currency=USD"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="script.js"></script>
  
<body>
  <!-- MENU TOGGLE + OVERLAY -->
  <div class="menu-toggle" id="menuToggle">â˜°</div>
  <div class="overlay" id="overlay"></div>

  <!-- SIDE MENU -->
  <nav class="side-menu" id="sideMenu">
    <button id="closeMenu">&times;</button>
    <h2>Vault Menu</h2>

    <div class="accordion">
      <!-- ABOUT -->
      <div class="accordion-item">
        <button class="accordion-header">ğŸ“œ About The Vault Of Time</button>
        <div class="accordion-content">
          <p>The Vault Of Time is an internet capsule where people collectively come to store memories of their lives, hopes for their futures, letters to their future selves, or anything that holds meaning to them.</p>
          <p>It is a preservation of memory and a digital reminder to hold on and persevere â€” a monument to human experience, proof that even in chaos, we remember, we create, and we hope.</p>
          <p><strong>Only 1,000,000 blocks will ever exist.</strong> Each block represents a unique fragment of human memory, preserved until 2050. Once the final block is claimed, the Vault will be sealed forever.</p>
        </div>
      </div>

      <!-- HOW TO BUY -->
      <div class="accordion-item">
        <button class="accordion-header">ğŸ’° How To Buy</button>
        <div class="accordion-content">
          <ol>
            <li>Select the block number you wish to purchase (e.g. 29).</li>
            <li>Fill in your details and upload your memory.</li>
            <li><strong>Important:</strong> Rename your uploaded file to match your block number (e.g. block29).</li>
            <li>Youâ€™ll receive a confirmation email and a digital Block Owner Certificate.</li>
          </ol>
          <p>ğŸ§± You have 7 days after purchase to edit or delete your upload. After that, itâ€™s sealed until 2050.</p>
        </div>
      </div>

      <!-- RULES -->
      <div class="accordion-item">
        <button class="accordion-header">âš–ï¸ Vault Rules</button>
        <div class="accordion-content">
          <ul>
            <li>âŒ No NSFW or illegal content â€” will be deleted without refund.</li>
            <li>âŒ No copyrighted material unless you own it.</li>
            <li>ğŸš« No hate speech or discriminatory content of any kind.</li>
            <li>ğŸš« No confessions to crimes â€” they will be reported.</li>
            <li>ğŸ•’ You have 7 days to edit or delete uploads before sealing.</li>
            <li>ğŸ’¬ Keep uploads kind, creative, and meaningful.</li>
            <li>ğŸ’¸ All transactions are final.</li>
            <li>ğŸª™ Buyers grant The Vault Of Time non-exclusive rights to store their content until 2050.</li>
            <li>ğŸ”’ All content remains securely hidden until the Vault opens.</li>
          </ul>
        </div>
      </div>

      <!-- FAQ -->
      <div class="accordion-item">
        <button class="accordion-header">â“ FAQ</button>
        <div class="accordion-content">
          <p><strong>1. What is The Vault Of Time?</strong><br>The Vault is a digital time capsule â€” not crypto, crowdfunding, or an investment. Each block is a one-time purchase.</p>
          <p><strong>2. When will The Vault open?</strong><br>In 2050.</p>
          <p><strong>3. What can I store?</strong><br>Anything meaningful â€” images, letters, or short audio clips.</p>
          <p><strong>4. How is the content stored?</strong><br>Your uploads are kept securely in encrypted off-site cold storage. Even if the creators are gone, the Vault will open in 2050.</p>
          <p><strong>5. Do you allow partnerships or ads?</strong><br>Yes â€” email <a href="mailto:hello@vaultoftime.com">hello@vaultoftime.com</a> for sponsorship or advertising info.</p>
          <p><strong>6. What happens after I buy a block?</strong><br>Your block locks and dims. Your memory remains hidden until 2050 (except for advertising blocks).</p>
        </div>
      </div>

      <!-- TERMS -->
      <div class="accordion-item">
        <button class="accordion-header">ğŸ“œ Terms & Conditions</button>
        <div class="accordion-content">
          <p><strong>Last Updated:</strong> November 2025</p>
          <ul>
            <li>All purchases are final after a block is sealed.</li>
            <li>Buyers may edit or delete uploads within 7 days of purchase.</li>
            <li>The Vault reserves the right to remove illegal or harmful content.</li>
            <li>By uploading, you grant The Vault Of Time (Pty) Ltd the right to store and reveal your content in 2050.</li>
            <li>The Vault Of Time (Pty) Ltd is not liable for file corruption or external events beyond control.</li>
            <li>Personal data is only used for verification â€” never shared externally.</li>
          </ul>
          <p>Vault Of Time (Pty) Ltd â€” Reg No: 2025/875420/07</p>
        </div>
      </div>

      <!-- FOLLOW -->
      <div class="accordion-item">
        <button class="accordion-header">ğŸ“² Follow Us</button>
        <div class="accordion-content">
          <p><a href="https://www.instagram.com/officialvaultoftime" target="_blank">Instagram</a></p>
          <p><a href="https://www.tiktok.com/@officialvaultoftime" target="_blank">TikTok</a></p>
        </div>
      </div>
    </div>

    <p style="font-size:12px;color:#777;margin-top:25px;">
      Â© 2025 Vault Of Time (Pty) Ltd â€” Reg No: 2025/875420/07
    </p>
  </nav>

  <!-- HEADER -->
  <h1>
    <span class="clock-icon">ğŸ•°ï¸</span> The Vault of Time <span class="clock-icon reverse">ğŸ•°ï¸</span>
  </h1>

  <!-- GRID -->
  <div class="grid-container" id="grid"></div>

  <!-- TOTAL BLOCKS BANNER -->
  <div class="total-blocks-banner">
    <p>ğŸª™ The Vault will hold exactly <strong>1,000,000 blocks</strong>. Each block is a permanent digital artifact sealed until 2050.</p>
  </div>
  
  <!-- MODAL -->
  <div class="modal hidden" id="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h2>Claim Your Block</h2>

      <p id="selected-block-text" style="font-weight:600;color:#f9d26e;"></p>

      <p>Fill in your details to reserve your Vault block.</p>
      <form id="blockForm" autocomplete="on" novalidate>
        <input type="hidden" id="blockNumber" name="block_number" value="">
        <input type="text" id="name" name="name" placeholder="Your Name" required style="width:100%;padding:8px;margin:6px 0;border-radius:4px;border:none;">
        <input type="email" id="email" name="email" placeholder="Your Email" required style="width:100%;padding:8px;margin:6px 0;border-radius:4px;border:none;">
        <input type="file" id="fileUpload" name="fileUpload" accept="image/*,.txt,.pdf,.mp3,.mp4" required style="width:100%;padding:8px;margin:6px 0;border-radius:4px;border:none;background-color:#161b22;color:#e6edf3;">

        <!-- Gate + PayPal -->
        <div id="ready-message">âœ… Ready for checkout</div>
        <div id="paypal-button-container"></div>

        <!-- Make sure this button DOESN'T submit the page -->
        <button type="button" id="uploadBtn" style="background-color:#d4af37;color:#0d1117;border:none;padding:10px 16px;border-radius:5px;cursor:pointer;font-weight:600;margin-top:10px;">
          Save Details
        </button>
      </form>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <p>
      <a href="contact.html">ğŸ“© Contact Us</a> |
      <a href="terms.html">ğŸ“œ Terms & Conditions</a><br>
      <small style="color:#777;">Â© 2025 Vault Of Time (Pty) Ltd â€” Reg No: 2025/875420/07</small>
    </p>
  </footer>

  <!-- INLINE BRIDGE: block â†’ form â†’ PayPal -->
  <script>
    let selectedBlockNumber = null;

    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('block')) {
        selectedBlockNumber = e.target.textContent.trim();
        document.getElementById('blockNumber').value = selectedBlockNumber;
        const label = document.getElementById('selected-block-text');
        if (label) label.textContent = 'Selected Block: #' + selectedBlockNumber;
      }
    });

    const nameEl = () => document.getElementById('name');
    const emailEl = () => document.getElementById('email');
    const fileEl = () => document.getElementById('fileUpload');
    const readyMsg = () => document.getElementById('ready-message');
    const ppContainer = () => document.getElementById('paypal-button-container');

    function canCheckout() {
      return (
        selectedBlockNumber &&
        nameEl().value.trim() &&
        emailEl().value.trim() &&
        fileEl().files.length > 0
      );
    }

    function updateGate() {
      if (canCheckout()) {
        readyMsg().classList.add('show');
        ppContainer().classList.add('show');
      } else {
        readyMsg().classList.remove('show');
        ppContainer().classList.remove('show');
      }
    }

    ['input','change'].forEach(evt => {
      document.getElementById('blockForm').addEventListener(evt, updateGate, true);
    });

    document.getElementById('uploadBtn').addEventListener('click', updateGate);

    paypal.Buttons({
      style: { color:'gold', shape:'pill', label:'pay', height:45 },
      createOrder: function(data, actions) {
        const label = selectedBlockNumber ? `Vault of Time Block #${selectedBlockNumber}` : 'Vault of Time Block';
        return actions.order.create({
          purchase_units: [{
            description: label,
            amount: { currency_code: 'USD', value: '6.00' }
          }]
        });
      },
      onApprove: function(data, actions) {
        return actions.order.capture().then(function(details) {
          alert(`âœ… Transaction completed by ${details.payer.name.given_name}.
Your Block #${selectedBlockNumber} is now reserved.`);

          const blocks = document.querySelectorAll('.block');
          blocks.forEach(b => {
            if (b.textContent.trim() === String(selectedBlockNumber)) {
              b.classList.add('claimed');
              b.style.cursor = 'not-allowed';
            }
          });

          const name = document.getElementById('name').value.trim();
          generateCertificatePDF(name, selectedBlockNumber);
        });
      },
      onCancel: function() { alert('âŒ Transaction cancelled.'); },
      onError: function(err) {
        console.error(err);
        alert('Payment error. Please try again.');
      }
    }).render('#paypal-button-container');

    // === PDF Certificate Generator ===
    async function generateCertificatePDF(name, blockNumber) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ orientation: 'landscape', unit: 'pt', format: 'a4' });

      const pageWidth = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();

      doc.setFillColor(13, 17, 23);
      doc.rect(0, 0, pageWidth, pageHeight, 'F');

      doc.setDrawColor(212, 175, 55);
      doc.setLineWidth(6);
      doc.rect(30, 30, pageWidth - 60, pageHeight - 60);

      doc.setTextColor(212, 175, 55);
      doc.setFont('times', 'bold');
      doc.setFontSize(30);
      doc.text('Vault Of Time Certificate of Ownership', pageWidth / 2, 120, { align: 'center' });

      doc.setFont('times', 'normal');
      doc.setFontSize(18);
      doc.text('This certifies that', pageWidth / 2, 200, { align: 'center' });

      doc.setFont('times', 'bolditalic');
      doc.setFontSize(26);
      doc.text(name, pageWidth / 2, 240, { align: 'center' });

      doc.setFont('times', 'normal');
      doc.setFontSize(18);
      doc.text(`is the rightful guardian of Block #${blockNumber}`, pageWidth / 2, 280, { align: 'center' });
      doc.text('Sealed within The Vault until 2050.', pageWidth / 2, 310, { align: 'center' });

      const today = new Date().toLocaleDateString();
      doc.setFontSize(14);
      doc.text(`Issued on: ${today}`, pageWidth / 2, 360, { align: 'center' });

      const logo = new Image();
      logo.src = 'vault-logo.jpg';
      logo.onload = () => {
        const size = 200;
        doc.addImage(logo, 'JPEG', pageWidth - size - 60, pageHeight - size - 60, size, size, '', 'FAST');
        doc.save(`VaultOfTime_Certificate_Block${blockNumber}.pdf`);
      };
      logo.onerror = () => {
        doc.save(`VaultOfTime_Certificate_Block${blockNumber}.pdf`);
      };
    }
  </script>

  <script src="script.js"></script>
</body>
</html>
